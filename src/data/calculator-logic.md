# Логика расчёта калькулятора стоимости услуг EgoTax

## Базовая стоимость по форме юридического лица

| Форма | Базовая цена (MDL) |
|-------|-------------------|
| SRL | 2500 |
| I.I. (Întreprindere Individuală) | 1500 |
| ICS | 2000 |
| AO (Asociație Obștească) | 1800 |
| SA (Societate pe Acțiuni) | 3000 |
| Parc IT | 2200 |
| APC | 1600 |
| Не выбрано | 2000 (по умолчанию) |

## Дополнительные надбавки

### Типы деятельности

**+300 MDL** за каждый выбранный тип деятельности

Доступные типы:
- Companii IT
- Servicii B2B
- Servicii juridice
- Farmaceutică
- Logistică
- Medicină
- Import/export
- Comerț
- Producție
- Construcții
- Consultanță
- Marketing și publicitate
- Servicii financiare
- Educație și formare
- Turism și ospitalitate
- Transport și expediere
- Agricultură
- Imobiliare
- Energie și utilități
- Telecomunicații

### Количество операций в месяц

**+100 MDL** за каждые 10 операций

| Операций | Надбавка |
|----------|----------|
| 10 | +100 MDL |
| 20 | +200 MDL |
| 30 | +300 MDL |
| 40 | +400 MDL |
| 50 | +500 MDL |
| 60 | +600 MDL |
| 70 | +700 MDL |
| 80 | +800 MDL |
| 90 | +900 MDL |
| 100 | +1000 MDL |

**Формула:** `(количество_операций / 10) × 100 MDL`

**Примеры:**
- 10 операций = +100 MDL
- 30 операций = +300 MDL
- 50 операций = +500 MDL
- 100 операций = +1000 MDL

### Основные параметры (таб "Principal")

| Параметр | Надбавка |
|----------|----------|
| Дополнительная деятельность (hasAdditionalActivity) | +400 MDL (фиксированно) |
| Плательщик НДС (isVATpayer) | +600 MDL (фиксированно) |
| Сотрудники (employeesCount) | +150 MDL × количество |
| Банковские счета (bankAccounts) | +100 MDL × (количество - 1)* |

*Первый банковский счёт включён в базовую стоимость

### Дополнительные параметры (таб "Suplimentar")

| Параметр | Код | Надбавка за единицу |
|----------|-----|---------------------|
| Кассовые аппараты | cashRegisters | +200 MDL |
| POS-терминалы | posTerminals | +150 MDL |
| Автомобили | vehicles | +300 MDL |
| Аренда у физических лиц | individualRentals | +100 MDL |
| Кредиты | credits | +250 MDL |
| Лизинг | leasing | +200 MDL |
| Командировки | businessTrips | +100 MDL |

## Формула расчёта

```
Итого = Базовая_стоимость_по_форме
      + (Количество_типов_деятельности × 300)
      + ((Операций / 10) × 100)
      + (hasAdditionalActivity ? 400 : 0)
      + (isVATpayer ? 600 : 0)
      + (employeesCount × 150)
      + (cashRegisters × 200)
      + (posTerminals × 150)
      + (vehicles × 300)
      + (individualRentals × 100)
      + (credits × 250)
      + (leasing × 200)
      + (businessTrips × 100)
      + ((bankAccounts - 1) × 100)
```

## Примеры расчётов

### Пример 1: Малый бизнес

**Входные данные:**
- I.I. (базовая: 1500 MDL)
- 1 тип деятельности (Comerț)
- 20 операций в месяц
- Без НДС
- 0 сотрудников
- 1 банковский счёт

**Расчёт:**
```
1500 (I.I.)
+ 300 (1 тип деятельности)
+ 200 (20 операций: 2 × 100)
+ 0 (без НДС)
+ 0 (без сотрудников)
+ 0 (1 счёт включён)
= 2000 MDL/месяц
```

### Пример 2: Средний бизнес

**Входные данные:**
- SRL (базовая: 2500 MDL)
- 2 типа деятельности (IT + B2B)
- 80 операций в месяц
- Плательщик НДС
- 3 сотрудника
- 2 банковских счёта
- 1 автомобиль

**Расчёт:**
```
2500 (SRL)
+ 600 (2 типа × 300)
+ 800 (80 операций: 8 × 100)
+ 600 (НДС)
+ 450 (3 сотрудника × 150)
+ 100 (1 доп. счёт × 100)
+ 300 (1 авто × 300)
= 5350 MDL/месяц
```

### Пример 3: Крупный бизнес

**Входные данные:**
- SA (базовая: 3000 MDL)
- 4 типа деятельности
- 150 операций в месяц
- Плательщик НДС
- 10 сотрудников
- 3 банковских счёта
- 2 кассовых аппарата
- 3 POS-терминала
- 5 автомобилей
- 2 кредита
- 1 лизинг

**Расчёт:**
```
3000 (SA)
+ 1200 (4 типа × 300)
+ 1000 (100 операций: 10 × 100)
+ 600 (НДС)
+ 1500 (10 сотрудников × 150)
+ 200 (2 доп. счёта × 100)
+ 400 (2 кассы × 200)
+ 450 (3 POS × 150)
+ 1500 (5 авто × 300)
+ 500 (2 кредита × 250)
+ 200 (1 лизинг × 200)
= 10550 MDL/месяц
```

## Что включено в стоимость

При расчёте в карточке результата отображается список включённых услуг:
- ✓ Ținerea evidenței (Ведение учёта)
- ✓ Raportare (Отчётность)
- ✓ Consultații (Консультации)
- ✓ Evidența TVA (только если isVATpayer = true)
- ✓ Resurse umane (только если employeesCount > 0)

## Технические детали

### Значения по умолчанию

```typescript
const defaultData: CalculatorData = {
  legalForm: '',
  activityTypes: [],
  operationsCount: 10,
  hasAdditionalActivity: false,
  isVATpayer: false,
  employeesCount: 0,
  cashRegisters: 0,
  posTerminals: 0,
  vehicles: 0,
  individualRentals: 0,
  credits: 0,
  leasing: 0,
  businessTrips: 0,
  bankAccounts: 1
}
```

### Слайдер операций

- Минимум: 10
- Максимум: 100
- Шаг: 10
- Отображение диапазонов: 1-10, 11-20, 21-30, ..., 91-100, 100+

### Индикатор дополнительных параметров

Синяя точка появляется на табе "Suplimentar", если заполнен хотя бы один из параметров:
- cashRegisters > 0
- posTerminals > 0
- vehicles > 0
- individualRentals > 0
- credits > 0
- leasing > 0
- businessTrips > 0
- bankAccounts > 1
